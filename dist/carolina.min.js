"use strict";!function(n){function e(){return!!s||(i("error","You must initailzied carolina.js `carolina.init(options)`"),!1)}function t(n){return g=n,this}function o(n){return f=n,this}function i(n,e){if("function"!=typeof console[n])return void console.error("Trying to you console log with unknown console type => ",n);if("debug"!==n||d){for(var t=arguments.length,o=Array(t>2?t-2:0),i=2;i<t;i++)o[i-2]=arguments[i];if(Array.isArray(o)&&o.length>0)return void console[n]("CAROLINA::"+e,o);console[n]("CAROLINA::"+e)}}function r(n){u=new webkitSpeechRecognition,u.lang=n.lang,u.continuous=n.continuous,u.interimResults=n.interimResults}function c(n){var e=a.callbacks;if(!e)return void i("debug","There is no configured callbacks!");if(!e[n])return void i("debug","There is no callback configured for callback name => ",n);for(var t=arguments.length,o=Array(t>1?t-1:0),r=1;r<t;r++)o[r-1]=arguments[r];e[n].apply(e.context,o)}if(!("webkitSpeechRecognition"in window))return void i("warn","Your browser is not support webkit speech recognition!");var u=new webkitSpeechRecognition,s=!1,a={toString:function(){var n="\n";return Object.keys(this).map(function(e,t,o){"toString"!==e&&(n+=e+" => "+this[e],t!==o.length-1&&(n+="\n"))}.bind(this)),n}},d=!1,l=0,f=!1,g="",h="";_version="1.0.0";var b=function(n){var e,t;return{start:function(){e=new Date},end:function(){t=new Date;var o=t.getTime()-e.getTime();i("debug",n+" took "+o+" ms to execute")}}},p=function(n){var e="",t=new b("ON_RESULT");t.start(),h=g;for(var o=n.resultIndex;o<n.results.length;++o){var r=n.results[o][0].transcript,u=n.results[o][0].confidence;if(a.quality!==Math.round(u))return void i("warn","The transcript we got is not confidence enough due to your quality restrictions. ",r);n.results[o].isFinal?(g+=r,i("debug","Recevied new chunk transcript from user speaking text value & confidence => ",r,u),c("onChunkStream",r)):(e+=r,i("debug","Interim transcript current speaking value => ",e),c("onInterimTranscript",e))}g=g,i("debug","Live stream of transcript => ",g),c("onLiveStream",g),t.end()},v=function(){o(!0),i("debug","Start listening... "),c("onStart")},y=function(n){l++,o(!1),i("error","An error been occured => ",n),c("onError",n)},m=function(n){o(!1),t(""),i("info","Stop listening... "),c("onEnd",n)},S=function(n){i("debug","Sound recognisable speech or not has been detected"),c("onSoundStart",n)},w=function(n){i("debug","Speech recognition service returns a final result with no significant recognition. This may involve some degree of recognition, which doesnt meet or exceed the confidence threshold."),c("onNoMatch",n)},k=function(n){i("debug","Any sound recognisable speech or not has stopped being detected."),c("onSoundEnd",n)},O=function(n){i("debug","A sound that is recognised by the speech recognition service as speech has been detected."),c("onSpeechStart",n)},R=function(n){i("debug","Speech recognised by the speech recognition service has stopped being detected."),c("onSpeechEnd",n)},A={start:function(){u.start()},abort:function(){u.abort()},stop:function(){u.stop()},clearStream:function(){t("")},lastSentence:function(){return h},doctor:function(){i("info","Voice recognition status ver: "+_version+"\ndebug mode is "+(d?"ON":"OFF")+" \nconfiguration details are: "+a.toString()+"\nlibrary health condition "+(l>3?"POOR":"GOOD")+"\nquality of speaking "+(1===a.quality?"GOOD":"POOR"))},isListening:function(){return f}};u.onstart=v,u.onresult=p,u.onerror=y,u.onend=m,u.onnomatch=w,u.onsoundstart=S,u.onsoundend=k,u.onspeechstart=O,u.onspeechend=R,n.Carolina={init:function(n){if(s)return void i("error","You can init only once");s=!0,a=Object.assign({},a,{lang:n.lang||"en-US",debug:n.debug||!1,quality:n.quality||1,continuous:n.continuous||!1,interimResults:n.interimResults||!1,callbacks:n.callbacks}),d="boolean"==typeof n.debug&&n.debug,r({lang:a.lang,continuous:a.continuous,interimResults:a.interimResults})},fn:function(n){if(e()){if("function"!=typeof A[n])return void i("error","You try to invoke invalid method => ",n);var t;try{for(var o=arguments.length,r=Array(o>1?o-1:0),c=1;c<o;c++)r[c-1]=arguments[c];t=A[n].apply(this,r)}catch(n){i("error","You have been encounter api function exception => ",n)}return t}}}}(window);